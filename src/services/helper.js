const _0x374f28=_0xd9f0;(function(_0x33ab1a,_0x46c473){const _0x195e94=_0xd9f0,_0x2d1d01=_0x33ab1a();while(!![]){try{const _0x2ab2e5=parseInt(_0x195e94(0x1e7))/0x1*(-parseInt(_0x195e94(0x1e2))/0x2)+parseInt(_0x195e94(0x1ee))/0x3*(-parseInt(_0x195e94(0x1da))/0x4)+-parseInt(_0x195e94(0x1d2))/0x5*(-parseInt(_0x195e94(0x1d4))/0x6)+parseInt(_0x195e94(0x1fc))/0x7+parseInt(_0x195e94(0x1f8))/0x8+-parseInt(_0x195e94(0x1d0))/0x9*(-parseInt(_0x195e94(0x1bb))/0xa)+parseInt(_0x195e94(0x1c8))/0xb*(-parseInt(_0x195e94(0x1e8))/0xc);if(_0x2ab2e5===_0x46c473)break;else _0x2d1d01['push'](_0x2d1d01['shift']());}catch(_0x20ad63){_0x2d1d01['push'](_0x2d1d01['shift']());}}}(_0x2d3b,0xbf21d));function _0x2d3b(){const _0x2e0097=['message','-32000','-32603','Waiting\x20for\x20','random','allowance','6742270pXpfDm','tokens','Could\x20not\x20determine\x20gas\x20price\x20from\x20provider.','Transaction\x20confirmed\x20successfully.\x20Hash:\x20','exports','name','includes','provider','Transaction\x20confirmation\x20timed\x20out\x20after\x20',')\x20exceeds\x20balance\x20(','YELLOW','RPC\x20error\x20during\x20gas\x20estimation:\x20','code','310739fnNOaL','Sending\x20transaction...','toUpperCase','formatEther','shortMessage','approve','UNSUPPORTED_OPERATION','Token','18qDEasG','s\x20before\x20next\x20transaction...','4443905haUUcW','INSUFFICIENT_FUNDS','6hFfRtH','decimals','race','TransactionTimeoutError','populateTransaction','from','1192780tUlrob','formatUnits','values','../core/abi','Allowance\x20is\x20sufficient.\x20Skipping\x20approval.','Gas\x20fee\x20(','address','symbol','130PzvHFt','stringify','s.\x20RPC\x20may\x20down..','insufficient\x20balance','\x20allowance\x20for\x20spender...','10093JxTNxE','972aBwjjP','Fetching\x20transaction\x20data...','sendTransaction','getBalance','../utils/dashboard','Checking\x20','3WqowjV','addLog','hash','\x20seconds.','wait','GREEN','Approving\x20','substring','toLowerCase','native\x20token','12067904xGFrjm','operation','toString','Successfully\x20approved\x20','1956941BCYSzq','floor','balanceOf','getFeeData'];_0x2d3b=function(){return _0x2e0097;};return _0x2d3b();}const {ethers}=require('ethers'),{ERC20_ABI}=require(_0x374f28(0x1dd)),{colorText,COLORS}=require(_0x374f28(0x1ec)),TRANSACTION_TIMEOUT=0xea60,PREPARATION_TIMEOUT=0x61a8,MIN_DELAY=0x1388,MAX_DELAY=0x2710,randomDelay=(_0x5199cc,_0x4385d9)=>Math[_0x374f28(0x1fd)](Math[_0x374f28(0x1b9)]()*(_0x4385d9-_0x5199cc+0x1)+_0x5199cc),sleep=_0x23c4b4=>new Promise(_0x482044=>setTimeout(_0x482044,_0x23c4b4));class InsufficientGasError extends Error{constructor(_0x405be7){const _0x1d6b81=_0x374f28;super(_0x405be7),this[_0x1d6b81(0x1c0)]='InsufficientGasError';}}class TransactionTimeoutError extends Error{constructor(_0x90f3d8){const _0x11be74=_0x374f28;super(_0x90f3d8),this[_0x11be74(0x1c0)]=_0x11be74(0x1d7);}}async function populateTransactionWithTimeout(_0x2d0fe2,_0x26bd19,_0x32df1a,_0x300f75){const _0x54f978=_0x374f28;_0x300f75[_0x54f978(0x1ef)](_0x54f978(0x1e9));const _0x14dc69=new Promise((_0x26a92c,_0x51b84d)=>setTimeout(()=>_0x51b84d(new TransactionTimeoutError('Fetching\x20data\x20timed\x20out\x20after\x20'+PREPARATION_TIMEOUT/0x3e8+_0x54f978(0x1e4))),PREPARATION_TIMEOUT));try{const _0x4ed685=async()=>{const _0x19ebf2=_0x54f978,_0x4ddee3=await _0x2d0fe2[_0x26bd19][_0x19ebf2(0x1d8)](..._0x32df1a);return _0x4ddee3;},_0x168d99=await Promise['race']([_0x4ed685(),_0x14dc69]);return _0x168d99;}catch(_0x26d920){_0x26d920 instanceof TransactionTimeoutError&&_0x300f75[_0x54f978(0x1ef)](colorText(_0x26d920['message'],COLORS[_0x54f978(0x1c5)]));throw _0x26d920;}}async function sendTransactionWithTimeout(_0x48c735,_0x586bef,_0x156d39){const _0x36b83e=_0x374f28;let _0x126c91;try{_0x156d39['addLog'](_0x36b83e(0x1c9)),_0x126c91=await _0x48c735[_0x36b83e(0x1ea)](_0x586bef);}catch(_0x28541a){_0x28541a['code']===_0x36b83e(0x1ce)&&_0x28541a[_0x36b83e(0x1f9)]==='bodyJson'&&_0x156d39[_0x36b83e(0x1ef)](colorText('RPC\x20error\x20on\x20send:\x20'+_0x28541a[_0x36b83e(0x1cc)]+'.',COLORS[_0x36b83e(0x1c5)]));throw _0x28541a;}const _0x118a4c=new Promise((_0x5dc44e,_0x4e6d63)=>setTimeout(()=>_0x4e6d63(new TransactionTimeoutError(_0x36b83e(0x1c3)+TRANSACTION_TIMEOUT/0x3e8+_0x36b83e(0x1f1))),TRANSACTION_TIMEOUT));try{const _0x47f30c=await Promise[_0x36b83e(0x1d6)]([_0x126c91[_0x36b83e(0x1f2)](),_0x118a4c]);_0x156d39['addLog'](colorText(_0x36b83e(0x1be)+_0x47f30c[_0x36b83e(0x1f0)][_0x36b83e(0x1f5)](0x0,0xa)+'...',COLORS[_0x36b83e(0x1f3)]));const _0x329b93=randomDelay(MIN_DELAY,MAX_DELAY);return _0x156d39[_0x36b83e(0x1ef)](_0x36b83e(0x1b8)+_0x329b93/0x3e8+_0x36b83e(0x1d1)),await sleep(_0x329b93),_0x47f30c;}catch(_0x3a7156){_0x3a7156 instanceof TransactionTimeoutError&&_0x156d39[_0x36b83e(0x1ef)](colorText(_0x3a7156[_0x36b83e(0x1b5)],COLORS[_0x36b83e(0x1c5)]));throw _0x3a7156;}}function isInsufficientFundsError(_0x2c609f){const _0x2a605c=_0x374f28;if(!_0x2c609f)return![];if(_0x2c609f instanceof InsufficientGasError)return!![];const _0x1d2b7a=(_0x2c609f[_0x2a605c(0x1c7)]||'')[_0x2a605c(0x1fa)]()[_0x2a605c(0x1ca)]();if([_0x2a605c(0x1d3),_0x2a605c(0x1b6),_0x2a605c(0x1b7)][_0x2a605c(0x1c1)](_0x1d2b7a))return!![];const _0xe51668=JSON[_0x2a605c(0x1e3)](_0x2c609f)[_0x2a605c(0x1f6)]();return _0xe51668[_0x2a605c(0x1c1)]('insufficient\x20funds')||_0xe51668[_0x2a605c(0x1c1)]('signer\x20had\x20insufficient\x20balance')||_0xe51668[_0x2a605c(0x1c1)](_0x2a605c(0x1e5))||_0xe51668[_0x2a605c(0x1c1)]('invalid_account_address');}function _0xd9f0(_0x31e501,_0x58dafe){const _0x2d3b3d=_0x2d3b();return _0xd9f0=function(_0xd9f057,_0x3399e1){_0xd9f057=_0xd9f057-0x1b3;let _0x4ad190=_0x2d3b3d[_0xd9f057];return _0x4ad190;},_0xd9f0(_0x31e501,_0x58dafe);}async function checkGasAndBalance(_0x2999d2,_0x2d5605,_0x281076){const _0x54130c=_0x374f28;try{const _0x49dbe2=await _0x2999d2[_0x54130c(0x1c2)][_0x54130c(0x1b4)](),_0x2e5ab2=_0x49dbe2['gasPrice'];if(!_0x2e5ab2)throw new Error(_0x54130c(0x1bd));if(!_0x2d5605[_0x54130c(0x1d9)])_0x2d5605[_0x54130c(0x1d9)]=_0x2999d2[_0x54130c(0x1e0)];const _0x4267ca=await _0x2999d2[_0x54130c(0x1c2)]['estimateGas'](_0x2d5605),_0x19f73d=_0x4267ca*0x78n/0x64n,_0x450d63=_0x19f73d*_0x2e5ab2,_0x31080d=await _0x2999d2[_0x54130c(0x1c2)][_0x54130c(0x1eb)](_0x2999d2['address']),_0x5b5203=_0x281076?.[_0x54130c(0x1e1)]||_0x54130c(0x1f7);if(_0x31080d<_0x450d63)throw new InsufficientGasError(_0x54130c(0x1df)+ethers['formatEther'](_0x450d63)+'\x20'+_0x5b5203+_0x54130c(0x1c4)+ethers[_0x54130c(0x1cb)](_0x31080d)+'\x20'+_0x5b5203+').');}catch(_0x462e7c){_0x462e7c['code']===_0x54130c(0x1ce)&&_0x462e7c[_0x54130c(0x1f9)]==='bodyJson'&&dashboard[_0x54130c(0x1ef)](colorText(_0x54130c(0x1c6)+_0x462e7c[_0x54130c(0x1cc)]+'.',COLORS[_0x54130c(0x1c5)]));if(_0x462e7c instanceof InsufficientGasError||isInsufficientFundsError(_0x462e7c))throw _0x462e7c;throw new Error('Gas\x20estimation\x20failed:\x20'+_0x462e7c['message']);}}async function getFullBalance(_0xe3c1df,_0x26ed96){const _0x32799a=_0x374f28;try{if(!_0x26ed96)return'0';const _0x308291=new ethers['Contract'](_0x26ed96,ERC20_ABI,_0xe3c1df),_0x54f513=await _0x308291[_0x32799a(0x1b3)](_0xe3c1df[_0x32799a(0x1e0)]),_0x2432fd=await _0x308291[_0x32799a(0x1d5)]();return ethers[_0x32799a(0x1db)](_0x54f513,_0x2432fd);}catch(_0x254c35){return'0';}}async function getAllBalances(_0x50c986,_0x180cf8){const _0x312fbe=_0x374f28,_0x20947e={},{tokens:_0x362212,symbol:_0x17f86f}=_0x180cf8;for(const _0x36e9e4 of Object[_0x312fbe(0x1dc)](_0x362212)){_0x36e9e4&&_0x36e9e4[_0x312fbe(0x1e0)]&&(_0x20947e[_0x36e9e4[_0x312fbe(0x1e1)]]=await getFullBalance(_0x50c986,_0x36e9e4[_0x312fbe(0x1e0)]));}const _0x27f776=await _0x50c986[_0x312fbe(0x1c2)][_0x312fbe(0x1eb)](_0x50c986['address']);return _0x20947e[_0x17f86f]=ethers['formatEther'](_0x27f776),_0x20947e;}async function approveToken(_0x2834e4,_0x17f8fc,_0x3abf98,_0x36836a,_0x4044df,_0x1a9456){const _0x20c68a=_0x374f28,_0x52e45b=new ethers['Contract'](_0x17f8fc,ERC20_ABI,_0x2834e4);let _0x21f936=_0x20c68a(0x1cf);for(const _0xb98c01 in _0x1a9456['tokens']){if(_0x1a9456[_0x20c68a(0x1bc)][_0xb98c01][_0x20c68a(0x1e0)]['toLowerCase']()===_0x17f8fc[_0x20c68a(0x1f6)]()){_0x21f936=_0x1a9456[_0x20c68a(0x1bc)][_0xb98c01][_0x20c68a(0x1e1)];break;}}const _0xf6c855=await _0x52e45b[_0x20c68a(0x1d5)](),_0x1ee63b=ethers['parseUnits'](_0x36836a,_0xf6c855);_0x4044df[_0x20c68a(0x1ef)](_0x20c68a(0x1ed)+_0x21f936+_0x20c68a(0x1e6));const _0x2dafd7=await _0x52e45b[_0x20c68a(0x1ba)](_0x2834e4[_0x20c68a(0x1e0)],_0x3abf98);if(_0x2dafd7>=_0x1ee63b){_0x4044df['addLog'](colorText(_0x20c68a(0x1de),COLORS[_0x20c68a(0x1f3)]));return;}_0x4044df['addLog'](_0x20c68a(0x1f4)+_0x36836a+'\x20'+_0x21f936+'\x20for\x20spender...');const _0x1cafea=await populateTransactionWithTimeout(_0x52e45b,_0x20c68a(0x1cd),[_0x3abf98,_0x1ee63b],_0x4044df);await checkGasAndBalance(_0x2834e4,_0x1cafea,_0x1a9456),await sendTransactionWithTimeout(_0x2834e4,_0x1cafea,_0x4044df),_0x4044df[_0x20c68a(0x1ef)](colorText(_0x20c68a(0x1fb)+_0x36836a+'\x20'+_0x21f936+'.',COLORS['GREEN']));}module[_0x374f28(0x1bf)]={'getFullBalance':getFullBalance,'getAllBalances':getAllBalances,'approveToken':approveToken,'InsufficientGasError':InsufficientGasError,'isInsufficientFundsError':isInsufficientFundsError,'checkGasAndBalance':checkGasAndBalance,'sendTransactionWithTimeout':sendTransactionWithTimeout,'populateTransactionWithTimeout':populateTransactionWithTimeout};