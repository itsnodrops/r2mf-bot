const _0x31ff84=_0x485f;(function(_0x1418b7,_0xd17c04){const _0x2f23bf=_0x485f,_0x38cf74=_0x1418b7();while(!![]){try{const _0x59902f=-parseInt(_0x2f23bf(0x163))/0x1*(-parseInt(_0x2f23bf(0x16a))/0x2)+parseInt(_0x2f23bf(0x16e))/0x3+parseInt(_0x2f23bf(0x16c))/0x4+parseInt(_0x2f23bf(0x164))/0x5+-parseInt(_0x2f23bf(0x153))/0x6*(-parseInt(_0x2f23bf(0x156))/0x7)+parseInt(_0x2f23bf(0x15d))/0x8*(parseInt(_0x2f23bf(0x166))/0x9)+-parseInt(_0x2f23bf(0x16f))/0xa;if(_0x59902f===_0xd17c04)break;else _0x38cf74['push'](_0x38cf74['shift']());}catch(_0x4566eb){_0x38cf74['push'](_0x38cf74['shift']());}}}(_0xdd2c,0xa7b3b));const {ethers}=require('ethers'),{LP_ABI,ALT_LP_ABI}=require('../core/abi'),{approveToken,getFullBalance,sendTransactionWithTimeout,populateTransactionWithTimeout}=require('./helper'),SLIPPAGE_TOLERANCE=0.1;function _0xdd2c(){const _0x4d8f3e=['Adding\x20liquidity\x20with\x20','2686044vxEGtT','34713520HAarkM','formatUnits','round','5514GmVqLL','add_liquidity','now','7784JTMjnM','floor','parseUnits','exports','address','Contract','R2USD','8tFiSPQ','all','decimals','addLiquidity','Skipping\x20Add\x20Liquidity\x20due\x20to\x20low\x20R2USD\x20or\x20sR2USD\x20balance.','calc_token_amount','105tJGfvt','1586535ZIStjZ','addLog','9450297hFBkXX','sR2USD','split','balances','6470iBXkYw','\x20sR2USD...','2135872bpTopu'];_0xdd2c=function(){return _0x4d8f3e;};return _0xdd2c();}function _0x485f(_0x45785d,_0x1a01d0){const _0xdd2cc9=_0xdd2c();return _0x485f=function(_0x485fc5,_0x24c195){_0x485fc5=_0x485fc5-0x152;let _0x406e18=_0xdd2cc9[_0x485fc5];return _0x406e18;},_0x485f(_0x45785d,_0x1a01d0);}async function addLiquidityWithRemaining(_0x23e9a2,_0x2ad43a,_0x2794ed){const _0x292f41=_0x485f,{tokens:_0x3433da,contracts:_0x2bbbd4}=_0x2794ed,_0x4aee9e=new ethers[(_0x292f41(0x15b))](_0x2bbbd4['LP'],LP_ABI,_0x23e9a2),_0x5005c1=await getFullBalance(_0x23e9a2,_0x3433da['R2USD']['address']),_0x4f9748=await getFullBalance(_0x23e9a2,_0x3433da['sR2USD'][_0x292f41(0x15a)]);if(parseFloat(_0x5005c1)<0x64||parseFloat(_0x4f9748)<0x64)return _0x2ad43a['addLog']('Skipping\x20Add\x20Liquidity\x20due\x20to\x20low\x20R2USD\x20or\x20sR2USD\x20balance\x20(<\x20100).'),!![];const _0x231fa6=await Promise[_0x292f41(0x15e)]([_0x4aee9e[_0x292f41(0x169)](0x0),_0x4aee9e[_0x292f41(0x169)](0x1)]),_0x3457bd=_0x231fa6[0x0],_0x48bf2d=_0x231fa6[0x1];if(_0x48bf2d===0x0n)return _0x2ad43a[_0x292f41(0x165)]('Cannot\x20add\x20liquidity,\x20pool\x20is\x20empty.\x20Skipping.'),!![];const _0x1bb470=ethers[_0x292f41(0x158)](_0x5005c1,_0x3433da[_0x292f41(0x15c)][_0x292f41(0x15f)]),_0xc40dbc=ethers[_0x292f41(0x158)](_0x4f9748,_0x3433da[_0x292f41(0x167)]['decimals']),_0x2d6048=_0x1bb470*_0x3457bd/_0x48bf2d;let _0x517061,_0xf5a22a;if(_0x2d6048>_0xc40dbc){const _0xe28d08=_0xc40dbc*_0x48bf2d/_0x3457bd,_0x3836a5=ethers[_0x292f41(0x170)](_0xe28d08,_0x3433da[_0x292f41(0x15c)][_0x292f41(0x15f)]),_0x495e8e=_0x3836a5[_0x292f41(0x168)]('.')[0x0];_0x517061=ethers[_0x292f41(0x158)](_0x495e8e,_0x3433da[_0x292f41(0x15c)][_0x292f41(0x15f)]),_0xf5a22a=_0x517061*_0x3457bd/_0x48bf2d;}else{const _0x5a4f4c=_0x5005c1['split']('.')[0x0];_0x517061=ethers[_0x292f41(0x158)](_0x5a4f4c,_0x3433da[_0x292f41(0x15c)]['decimals']),_0xf5a22a=_0x517061*_0x3457bd/_0x48bf2d;}const _0x6f4ee3=[_0xf5a22a,_0x517061],_0x2a6c6e=ethers[_0x292f41(0x170)](_0x6f4ee3[0x0],_0x3433da[_0x292f41(0x167)][_0x292f41(0x15f)]),_0x336f51=ethers[_0x292f41(0x170)](_0x6f4ee3[0x1],_0x3433da[_0x292f41(0x15c)][_0x292f41(0x15f)]);if(_0xf5a22a>_0xc40dbc||_0x517061>_0x1bb470)return _0x2ad43a[_0x292f41(0x165)]('Calculation\x20error\x20resulted\x20in\x20an\x20amount\x20greater\x20than\x20the\x20balance.\x20Skipping\x20LP\x20to\x20be\x20safe.'),!![];const _0x5e4ad2=await _0x4aee9e[_0x292f41(0x162)](_0x6f4ee3,!![]),_0x4c43bb=BigInt(Math[_0x292f41(0x152)](SLIPPAGE_TOLERANCE*0x64)),_0x1dc0c0=_0x5e4ad2*(0x2710n-_0x4c43bb)/0x2710n;await approveToken(_0x23e9a2,_0x3433da['R2USD']['address'],_0x2bbbd4['LP'],_0x336f51,_0x2ad43a,_0x2794ed),await approveToken(_0x23e9a2,_0x3433da[_0x292f41(0x167)][_0x292f41(0x15a)],_0x2bbbd4['LP'],_0x2a6c6e,_0x2ad43a,_0x2794ed),_0x2ad43a[_0x292f41(0x165)](_0x292f41(0x16d)+_0x336f51+'\x20R2USD\x20and\x20'+_0x2a6c6e+_0x292f41(0x16b));const _0x2b47b1=await populateTransactionWithTimeout(_0x4aee9e,_0x292f41(0x154),[_0x6f4ee3,_0x1dc0c0],_0x2ad43a);return await sendTransactionWithTimeout(_0x23e9a2,_0x2b47b1,_0x2ad43a),!![];}async function addLiquidityAlt(_0x416dc9,_0x3a20b5,_0x1e029e){const _0x10f978=_0x485f,{tokens:_0x5428b7,contracts:_0x23c0f0}=_0x1e029e,_0x41e1b4=await getFullBalance(_0x416dc9,_0x5428b7[_0x10f978(0x15c)]['address']),_0x48a2d1=await getFullBalance(_0x416dc9,_0x5428b7[_0x10f978(0x167)][_0x10f978(0x15a)]),_0x31d6c2=ethers['parseUnits'](_0x41e1b4,_0x5428b7[_0x10f978(0x15c)][_0x10f978(0x15f)]),_0x51cff7=ethers[_0x10f978(0x158)](_0x48a2d1,_0x5428b7['sR2USD'][_0x10f978(0x15f)]);if(_0x31d6c2<0x1n||_0x51cff7<0x1n){_0x3a20b5[_0x10f978(0x165)](_0x10f978(0x161));return;}const _0x2ee3e3=_0x31d6c2<_0x51cff7?_0x31d6c2:_0x51cff7,_0x3285de=ethers[_0x10f978(0x170)](_0x2ee3e3,_0x5428b7[_0x10f978(0x15c)][_0x10f978(0x15f)]);await approveToken(_0x416dc9,_0x5428b7[_0x10f978(0x15c)][_0x10f978(0x15a)],_0x23c0f0['LP'],_0x3285de,_0x3a20b5,_0x1e029e),await approveToken(_0x416dc9,_0x5428b7[_0x10f978(0x167)][_0x10f978(0x15a)],_0x23c0f0['LP'],_0x3285de,_0x3a20b5,_0x1e029e);const _0x4c55aa=BigInt(Math[_0x10f978(0x152)](SLIPPAGE_TOLERANCE*0x64)),_0x494887=_0x2ee3e3*(0x2710n-_0x4c55aa)/0x2710n,_0x1e7f25=Math[_0x10f978(0x157)](Date[_0x10f978(0x155)]()/0x3e8)+0x3c*0x14;_0x3a20b5[_0x10f978(0x165)](_0x10f978(0x16d)+_0x3285de+'\x20R2USD\x20and\x20'+_0x3285de+_0x10f978(0x16b));const _0x6eb689=[_0x5428b7[_0x10f978(0x15c)][_0x10f978(0x15a)],_0x5428b7[_0x10f978(0x167)]['address'],_0x2ee3e3,_0x2ee3e3,_0x494887,_0x494887,_0x416dc9[_0x10f978(0x15a)],_0x1e7f25],_0x589436=await populateTransactionWithTimeout(new ethers[(_0x10f978(0x15b))](_0x23c0f0['LP'],ALT_LP_ABI,_0x416dc9),_0x10f978(0x160),_0x6eb689,_0x3a20b5);await sendTransactionWithTimeout(_0x416dc9,_0x589436,_0x3a20b5);}module[_0x31ff84(0x159)]={'addLiquidityWithRemaining':addLiquidityWithRemaining,'addLiquidityAlt':addLiquidityAlt};