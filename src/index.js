const _0x4b8b2c=_0x444c;(function(_0x2d5284,_0x28846a){const _0x498703=_0x444c,_0x11706f=_0x2d5284();while(!![]){try{const _0x330da0=-parseInt(_0x498703(0xa7))/0x1+-parseInt(_0x498703(0xa2))/0x2+parseInt(_0x498703(0xb0))/0x3+-parseInt(_0x498703(0xa1))/0x4*(-parseInt(_0x498703(0xa9))/0x5)+-parseInt(_0x498703(0xc2))/0x6+-parseInt(_0x498703(0xc7))/0x7+parseInt(_0x498703(0xa3))/0x8*(parseInt(_0x498703(0xc6))/0x9);if(_0x330da0===_0x28846a)break;else _0x11706f['push'](_0x11706f['shift']());}catch(_0x731247){_0x11706f['push'](_0x11706f['shift']());}}}(_0x26bd,0xd4feb));const {ethers}=require(_0x4b8b2c(0xac)),{getAllBalances,getFullBalance,InsufficientGasError,isInsufficientFundsError}=require('./services/helper'),{stakeAllWbtc,stakeR2usd,stakeR2usdAlt}=require(_0x4b8b2c(0xa5)),{runSwapCycle,swapAllUsdcToR2usd,consolidateAssets}=require(_0x4b8b2c(0x91)),{addLiquidityWithRemaining,addLiquidityAlt}=require('./services/lp'),{colorText,COLORS}=require(_0x4b8b2c(0x92)),{LP_ABI,ALT_LP_ABI}=require(_0x4b8b2c(0x90)),sleep=_0xeba107=>new Promise(_0x557a67=>setTimeout(_0x557a67,_0xeba107));function _0x26bd(){const _0x25aa79=['formatUnits','Contract','987696ougykH','accountManager','networkType','USDC\x20balance\x20is\x20too\x20low,\x20skipping\x20swap\x20cycle.','27yIzgyY','746872ENXAVI','address','addLog','\x20failed\x20(Attempt\x20','pharos-like','Sufficient\x20sR2USD\x20balance\x20found.\x20Skipping\x20staking.','GREEN','YELLOW','Balance\x20for\x20staking\x20is\x20too\x20low.\x20Skipping.','Calculation\x20resulted\x20in\x20no\x20staking\x20needed.\x20Proceeding\x20to\x20LP.','sepolia-like','./core/abi','./services/swap','./utils/dashboard','monad-like','all','split','.\x20Retrying\x20in\x2010s...','):\x20','\x20failed\x20after\x20','\x20on\x20','updateAccount','Processing:\x20','CYAN','toString','\x20attempts.','RED','Add\x20Liquidity','1736VNCIGK','2573140XiuGtb','6136744YxfyHP','decimals','./services/stake','name','1136380kbJYZU','substring','11830lvksiU','render','Stake\x20R2USD\x20for\x20LP','ethers','Asset\x20Consolidation','Calculated\x20staking\x20amount\x20is\x20less\x20than\x201\x20R2USD.\x20Skipping.','\x20finished\x20successfully\x20on\x20','715698RCxiuh','Process\x20Complete','Account\x20','Sufficient\x20sR2USD\x20balance\x20found.\x20No\x20staking\x20needed.','floor','tokens','sR2USD','\x20R2USD\x20to\x20balance\x20for\x20LP.','...','R2USD','Optimizing\x20Liquidity','Swap\x20USDC','Pool\x20is\x20uninitialized.\x20Staking\x20half\x20of\x20R2USD\x20as\x20fallback.','Starting\x20process\x20for\x20','message','parseUnits'];_0x26bd=function(){return _0x25aa79;};return _0x26bd();}async function refreshAndUpdate(_0x1cd7fa,_0x532a59,_0x1b2a74,_0x5c003e={}){const _0x382abf=_0x4b8b2c,_0x3c3e38=await getAllBalances(_0x1cd7fa,_0x1b2a74);_0x532a59['accountManager'][_0x382abf(0x9a)](_0x1cd7fa[_0x382abf(0xc8)],{'balances':_0x3c3e38,..._0x5c003e}),_0x532a59[_0x382abf(0xaa)]();}async function runWithRetries(_0x24f764,_0x5a1210,_0x527f28,_0x58ee9f,_0x1995c3,..._0x907631){const _0x3554a2=_0x4b8b2c;let _0x9857e3=0x0;const _0x504164=0x5;while(_0x9857e3<_0x504164){try{_0x527f28['accountManager'][_0x3554a2(0x9a)](_0x5a1210['address'],{'status':_0x3554a2(0x9b)+_0x1995c3}),await _0x24f764(_0x5a1210,..._0x907631,_0x527f28,_0x58ee9f),_0x527f28[_0x3554a2(0xc9)](colorText(_0x1995c3+'\x20successful.',COLORS['GREEN'])),await refreshAndUpdate(_0x5a1210,_0x527f28,_0x58ee9f);return;}catch(_0x46f1f0){if(isInsufficientFundsError(_0x46f1f0))throw _0x46f1f0;_0x9857e3++,_0x527f28[_0x3554a2(0xc9)](colorText(_0x1995c3+_0x3554a2(0xca)+_0x9857e3+'/'+_0x504164+_0x3554a2(0x97)+_0x46f1f0[_0x3554a2(0xbe)][_0x3554a2(0xa8)](0x0,0x64)+_0x3554a2(0x96),COLORS['RED'])),await refreshAndUpdate(_0x5a1210,_0x527f28,_0x58ee9f);if(_0x9857e3>=_0x504164)throw new Error(_0x1995c3+_0x3554a2(0x98)+_0x504164+_0x3554a2(0x9e));await sleep(0x2710);}}}async function runProcessSepolia(_0x4431e3,_0x5efb56,_0x7f276f){const _0x51e7e2=_0x4b8b2c;await runWithRetries(stakeAllWbtc,_0x4431e3,_0x5efb56,_0x7f276f,'Stake\x20wBTC');const _0x3df004=await getAllBalances(_0x4431e3,_0x7f276f);parseFloat(_0x3df004['USDC'])<0x1?_0x5efb56[_0x51e7e2(0xc9)](colorText(_0x51e7e2(0xc5),COLORS[_0x51e7e2(0x8c)])):(await runWithRetries(runSwapCycle,_0x4431e3,_0x5efb56,_0x7f276f,'Swap\x20Cycle'),await runWithRetries(consolidateAssets,_0x4431e3,_0x5efb56,_0x7f276f,_0x51e7e2(0xad))),await refreshAndUpdate(_0x4431e3,_0x5efb56,_0x7f276f),await runWithRetries(optimizeAndProvideLiquiditySepolia,_0x4431e3,_0x5efb56,_0x7f276f,_0x51e7e2(0xa0));}function _0x444c(_0xad3b47,_0x20b250){const _0x26bd23=_0x26bd();return _0x444c=function(_0x444ca9,_0x1e85df){_0x444ca9=_0x444ca9-0x8b;let _0xa73b71=_0x26bd23[_0x444ca9];return _0xa73b71;},_0x444c(_0xad3b47,_0x20b250);}async function runProcessMonad(_0x59b126,_0x2f95f9,_0x5b9239){const _0x23680c=_0x4b8b2c;await runWithRetries(swapAllUsdcToR2usd,_0x59b126,_0x2f95f9,_0x5b9239,'Swap\x20USDC');const {tokens:_0x441945}=_0x5b9239,_0x2a26b8=await getFullBalance(_0x59b126,_0x441945[_0x23680c(0xb9)]['address']),_0x59fba7=await getFullBalance(_0x59b126,_0x441945[_0x23680c(0xb6)]['address']),_0x52c31f=ethers[_0x23680c(0xbf)](_0x2a26b8,_0x441945[_0x23680c(0xb9)][_0x23680c(0xa4)]),_0x10c654=ethers[_0x23680c(0xbf)](_0x59fba7,_0x441945[_0x23680c(0xb6)][_0x23680c(0xa4)]);if(_0x10c654<_0x52c31f){_0x2f95f9[_0x23680c(0xc9)](colorText('Attempting\x20to\x20stake\x20R2USD\x20to\x20balance\x20for\x20LP...',COLORS[_0x23680c(0x9c)]));const _0x109a7a=async(_0x4baa46,_0x22fb97,_0x25f1ae)=>{const _0x13d9b2=_0x23680c,_0x175242=await getFullBalance(_0x4baa46,_0x25f1ae[_0x13d9b2(0xb5)][_0x13d9b2(0xb9)][_0x13d9b2(0xc8)]),_0x2bc6f5=Math[_0x13d9b2(0xb4)](parseFloat(_0x175242)/0x2);_0x2bc6f5>0x1?await stakeR2usdAlt(_0x4baa46,_0x2bc6f5[_0x13d9b2(0x9d)](),_0x22fb97,_0x25f1ae):_0x22fb97[_0x13d9b2(0xc9)](colorText('Balance\x20for\x20staking\x20is\x20too\x20low.\x20Skipping.',COLORS[_0x13d9b2(0x8c)]));};await runWithRetries(_0x109a7a,_0x59b126,_0x2f95f9,_0x5b9239,_0x23680c(0xab));}else _0x2f95f9['addLog'](colorText(_0x23680c(0xcc),COLORS[_0x23680c(0x8b)]));await runWithRetries(addLiquidityAlt,_0x59b126,_0x2f95f9,_0x5b9239,_0x23680c(0xa0));}async function runProcessPharos(_0x1274c5,_0x57b8de,_0x2d5ae5){const _0x615ce2=_0x4b8b2c;await runWithRetries(swapAllUsdcToR2usd,_0x1274c5,_0x57b8de,_0x2d5ae5,_0x615ce2(0xbb));const _0x48eb2d=async(_0xc6e0a0,_0xefee19,_0x4f25b4)=>{const _0x329a62=_0x615ce2,_0x105e5b=await getFullBalance(_0xc6e0a0,_0x4f25b4[_0x329a62(0xb5)][_0x329a62(0xb9)][_0x329a62(0xc8)]);parseFloat(_0x105e5b)>0x1?await stakeR2usdAlt(_0xc6e0a0,_0x105e5b,_0xefee19,_0x4f25b4):_0xefee19[_0x329a62(0xc9)](colorText(_0x329a62(0x8d),COLORS[_0x329a62(0x8c)]));};await runWithRetries(_0x48eb2d,_0x1274c5,_0x57b8de,_0x2d5ae5,'Stake\x20R2USD');}async function runProcess(_0x14970e,_0xa42c3a,_0x1f2a4f){const _0x4522ff=_0x4b8b2c;_0xa42c3a[_0x4522ff(0xc9)](_0x4522ff(0xbd)+_0x14970e[_0x4522ff(0xc8)]+_0x4522ff(0x99)+_0x1f2a4f['name']+_0x4522ff(0xb8));if(_0x1f2a4f[_0x4522ff(0xc4)]===_0x4522ff(0x8f))await runProcessSepolia(_0x14970e,_0xa42c3a,_0x1f2a4f);else{if(_0x1f2a4f[_0x4522ff(0xc4)]===_0x4522ff(0x93))await runProcessMonad(_0x14970e,_0xa42c3a,_0x1f2a4f);else{if(_0x1f2a4f[_0x4522ff(0xc4)]===_0x4522ff(0xcb))await runProcessPharos(_0x14970e,_0xa42c3a,_0x1f2a4f);else{_0xa42c3a[_0x4522ff(0xc9)](colorText('Error:\x20No\x20process\x20defined\x20for\x20network\x20type\x20\x27'+_0x1f2a4f['networkType']+'\x27.',COLORS[_0x4522ff(0x9f)]));return;}}}_0xa42c3a[_0x4522ff(0xc3)][_0x4522ff(0x9a)](_0x14970e[_0x4522ff(0xc8)],{'status':_0x4522ff(0xb1)}),_0xa42c3a[_0x4522ff(0xc9)](colorText(_0x4522ff(0xb2)+_0x14970e[_0x4522ff(0xc8)]+_0x4522ff(0xaf)+_0x1f2a4f[_0x4522ff(0xa6)]+'.',COLORS[_0x4522ff(0x8b)]));}async function optimizeAndProvideLiquiditySepolia(_0x482422,_0x36b598,_0x4db1bd){const _0x32580c=_0x4b8b2c,{tokens:_0x1dba4c,contracts:_0x791125}=_0x4db1bd;_0x36b598['accountManager'][_0x32580c(0x9a)](_0x482422['address'],{'status':_0x32580c(0xba)});const _0x1402c3=await getFullBalance(_0x482422,_0x1dba4c[_0x32580c(0xb9)]['address']),_0x108f1e=await getFullBalance(_0x482422,_0x1dba4c[_0x32580c(0xb6)]['address']);if(parseFloat(_0x1402c3)<0xa){_0x36b598[_0x32580c(0xc9)](colorText('Skipping\x20LP\x20process:\x20R2USD\x20balance\x20too\x20low.',COLORS[_0x32580c(0x8c)]));return;}const _0x52919a=new ethers[(_0x32580c(0xc1))](_0x791125['LP'],LP_ABI,_0x482422),_0x103558=await Promise[_0x32580c(0x94)]([_0x52919a['balances'](0x0),_0x52919a['balances'](0x1)]),_0x399207=_0x103558[0x0],_0x5efbed=_0x103558[0x1];if(_0x5efbed===0x0n||_0x399207===0x0n){_0x36b598['addLog'](colorText(_0x32580c(0xbc),COLORS['YELLOW']));const _0x3e858d=Math['floor'](parseFloat(_0x1402c3)/0x2);_0x3e858d>0x0&&(await stakeR2usd(_0x482422,_0x3e858d[_0x32580c(0x9d)](),_0x36b598,_0x4db1bd),await refreshAndUpdate(_0x482422,_0x36b598,_0x4db1bd));}else{const _0x4be1af=ethers[_0x32580c(0xbf)](_0x1402c3,_0x1dba4c[_0x32580c(0xb9)]['decimals']),_0x921096=ethers[_0x32580c(0xbf)](_0x108f1e,_0x1dba4c[_0x32580c(0xb6)][_0x32580c(0xa4)]),_0xe51693=_0x399207*_0x4be1af-_0x921096*_0x5efbed;if(_0xe51693>0x0n){const _0x2c2b9a=_0x5efbed+_0x399207,_0x1a0abb=_0xe51693/_0x2c2b9a;if(_0x1a0abb>0x0n&&_0x1a0abb<_0x4be1af){const _0x17ac63=ethers[_0x32580c(0xc0)](_0x1a0abb,_0x1dba4c[_0x32580c(0xb9)][_0x32580c(0xa4)]),_0x9ae385=_0x17ac63[_0x32580c(0x95)]('.')[0x0];parseInt(_0x9ae385,0xa)>0x0?(_0x36b598['addLog'](colorText('Staking\x20~'+_0x9ae385+_0x32580c(0xb7),COLORS[_0x32580c(0x9c)])),await stakeR2usd(_0x482422,_0x9ae385,_0x36b598,_0x4db1bd),await refreshAndUpdate(_0x482422,_0x36b598,_0x4db1bd)):_0x36b598['addLog'](colorText(_0x32580c(0xae),COLORS[_0x32580c(0x8c)]));}else _0x36b598[_0x32580c(0xc9)](colorText(_0x32580c(0x8e),COLORS[_0x32580c(0x8c)]));}else _0x36b598[_0x32580c(0xc9)](colorText(_0x32580c(0xb3),COLORS[_0x32580c(0x8b)]));}await addLiquidityWithRemaining(_0x482422,_0x36b598,_0x4db1bd);}module['exports']={'runProcess':runProcess,'refreshAndUpdate':refreshAndUpdate};